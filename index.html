<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="UTF-8">
    <title>ÌÇπÏΩ©Î®∏Îãà üí∏</title>
    <link rel="icon" type="image/x-icon" href="./assets/img/main/DK_icon.ico">
    <link rel="stylesheet" href="./css/main.css">
    <link rel="stylesheet" href="./css/nav.css">
    <script src="./JS/auth.js" defer></script>
    <script src="./JS/dummy.js" defer></script>
    <script src="./JS/base.js" defer></script>
</head>
<body>
    <video autoplay loop muted playsinline id="bg-video" style="filter: blur(3px);">
        <source src="./assets/video/Red_Smok.mp4" type="video/mp4">
    </video>

    <div id="content">
        <!-- Ïù¥Í≥≥Ïóê JavaScriptÏóê ÏùòÌï¥ Ïª®ÌÖêÏ∏†Í∞Ä Î°úÎìúÎê©ÎãàÎã§. -->
    </div>

    <script>
        async function loadContent() {
            const contentDiv = document.getElementById('content');

            if (MAINTENANCE_MODE) {
                contentDiv.innerHTML = `
                    <div class="top-box">
                        <div class="blackjack-img-container">
                            <img src="./assets/img/main/BlackJack.png" id="main-black" alt="Blackjack" class="blackjack-img">
                        </div>
                    </div>
                    <div class="mid-box">
                        <div class="maintenance-message" style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); color: white; font-size: 10vh; text-align: center;">
                            "Ïú†ÏßÄÎ≥¥Ïàò" <br> MOD
                        </div>
                    </div>
                    <div class="bot-box">
                        <div class="dealer-img-container">
                            <img src="./assets/img/main/dealer.png" id="dealer_img" alt="Blackjack" class="dealer-img">
                        </div>
                        <div class="user-info">
                            <p>ÎãâÎÑ§ÏûÑ: Ïú†ÏßÄÎ≥¥Ïàò Î™®Îìú</p>
                            <p>ÏΩîÏù∏: N/A</p>
                        </div>
                        <div class="button-container">
                            <div class="button-wrapper">
                                <a href="./HTML/Ranking.html" class="button">
                                    <img src="./assets/img/navbar/Ranking.svg" alt="Ranking" class="button-icon">
                                    <span class="button-text"> Îû≠ÌÇπ </span>
                                </a>
                            </div>
                            <div class="button-wrapper">
                                <a href="./HTML/History.html" class="button">
                                    <img src="./assets/img/navbar/History.svg" alt="History" class="button-icon">
                                    <span class="button-text"> Í∏∞Î°ù </span>
                                </a>
                            </div>
                            <div class="button-wrapper">
                                <a href="./HTML/Play.html" class="button">
                                    <img src="./assets/img/navbar/Play.svg" alt="Play" class="button-icon">
                                    <span class="button-text"> ÏãúÏûë </span>
                                </a>
                            </div>
                            <div class="button-wrapper">
                                <a href="./HTML/Mypage.html" class="button">
                                    <img src="./assets/img/navbar/Mypage.svg" alt="Mypage" class="button-icon">
                                    <span class="button-text"> Ï†ïÎ≥¥ </span>
                                </a>
                            </div>
                        </div>
                    </div>
                `;
                return;
            }

            const userData = await validateCookie();

            if (!getCookie("PHPSESSID")) {
                // Ïø†ÌÇ§Í∞Ä ÏóÜÎäî ÏÉÅÌÉú
                contentDiv.innerHTML = `
                    <div class="top-box">
                        <div class="blackjack-img-container">
                            <img src="./assets/img/main/BlackJack.png" id="main-black" alt="Blackjack" class="blackjack-img">
                        </div>
                    </div>
                    <div class="mid-box"></div>
                    <div class="bot-box">
                        <div class="dealer-img-container">
                            <img src="./assets/img/main/dealer.png" id="dealer_img" alt="Blackjack" class="dealer-img">
                        </div>
                        <div class="button-container">
                            <div class="button-wrapper">
                                <a href="./HTML/SignIn.html" class="button">
                                    <img src="./assets/img/navbar/SignIn.svg" alt="Sign In Icon" class="button-icon">
                                    <span class="button-text"> Î°úÍ∑∏Ïù∏ </span>
                                </a>
                            </div>
                            <div class="button-wrapper">
                                <a href="./HTML/SignUp.html" class="button">
                                    <img src="./assets/img/navbar/SignUp.svg" alt="Sign Up Icon" class="button-icon">
                                    <span class="button-text"> ÌöåÏõêÍ∞ÄÏûÖ </span>
                                </a>
                            </div>
                        </div>
                    </div>
                `;
            } else if (!userData) {
                // Ïø†ÌÇ§Í∞Ä ÏûàÎäîÎç∞ Ïú†Ìö®ÌïòÏßÄ ÏïäÏùÄ ÏÉÅÌÉú
                await logout();
            } else {
                const { username, coins } = userData;
                // Ïø†ÌÇ§Í∞Ä Ïú†Ìö®Ìïú ÏÉÅÌÉú
                contentDiv.innerHTML = `
                    <div class="top-box">
                        <div class="blackjack-img-container">
                            <img src="./assets/img/main/BlackJack.png" id="main-black" alt="Blackjack" class="blackjack-img">
                        </div>
                    </div>
                    <div class="mid-box"></div>
                    <div class="bot-box">
                        <div class="dealer-img-container">
                            <img src="./assets/img/main/dealer.png" id="dealer_img" alt="Blackjack" class="dealer-img">
                        </div>
                        <div class="user-info">
                            <p>ÎãâÎÑ§ÏûÑ: ${username}</p>
                            <p>ÏΩîÏù∏: ${coins}</p>
                        </div>
                        <div class="button-container">
                            <div class="button-wrapper">
                                <a href="./HTML/Ranking.html" class="button">
                                    <img src="./assets/img/navbar/Ranking.svg" alt="Ranking" class="button-icon">
                                    <span class="button-text"> Îû≠ÌÇπ </span>
                                </a>
                            </div>
                            <div class="button-wrapper">
                                <a href="./HTML/History.html" class="button">
                                    <img src="./assets/img/navbar/History.svg" alt="History" class="button-icon">
                                    <span class="button-text"> Í∏∞Î°ù </span>
                                </a>
                            </div>
                            <div class="button-wrapper">
                                <a href="./HTML/Play.html" class="button">
                                    <img src="./assets/img/navbar/Play.svg" alt="Play" class="button-icon">
                                    <span class="button-text"> ÏãúÏûë </span>
                                </a>
                            </div>
                            <div class="button-wrapper">
                                <a href="./HTML/Mypage.html" class="button">
                                    <img src="./assets/img/navbar/Mypage.svg" alt="Mypage" class="button-icon">
                                    <span class="button-text"> Ï†ïÎ≥¥ </span>
                                </a>
                            </div>
                        </div>
                    </div>
                `;
            }
        }

        // ÌéòÏù¥ÏßÄ Î°úÎìú Ïãú Ïª®ÌÖêÏ∏† Î°úÎìú
        window.onload = loadContent;
    </script>
</body>
</html>
