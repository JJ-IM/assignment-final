<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>í‚¹ì½©ë¨¸ë‹ˆ ğŸ’¸ - ë¡œê·¸ì¸</title>
    <link rel="icon" type="image/x-icon" href="../assets/img/main/DK_icon.ico">
    <link rel="stylesheet" href="../css/main.css">
    <link rel="stylesheet" href="../css/SignIn.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <video autoplay loop muted playsinline id="bg-video" style="filter: blur(3px);">
        <source src="../assets/video/Red_Smok.mp4" type="video/mp4">
    </video>

    <div id="content">
        <!-- JavaScriptê°€ ë¡œê·¸ì¸ ìƒíƒœì— ë”°ë¼ ì»¨í…ì¸ ë¥¼ ë¡œë“œí•©ë‹ˆë‹¤ -->
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const contentDiv = document.getElementById('content');

            // ì¿ í‚¤ë¥¼ ì½ëŠ” í•¨ìˆ˜
            function getCookie(name) {
                let value = "; " + document.cookie;
                let parts = value.split("; " + name + "=");
                if (parts.length == 2) return parts.pop().split(";").shift();
            }

            // ë¡œê·¸ì¸ ìƒíƒœë¥¼ í™•ì¸í•˜ëŠ” í•¨ìˆ˜
            function checkLogin() {
                return getCookie("username") !== undefined;
            }

            // ì´ë¯¸ì§€ ìŠ¬ë¼ì´ë“œì‡¼ë¥¼ ì‹œì‘í•˜ëŠ” í•¨ìˆ˜
            function startSlideshow() {
                let currentImageIndex = 0;
                const images = document.querySelectorAll('.image');

                // ì²« ë²ˆì§¸ ì´ë¯¸ì§€ë¥¼ ë°”ë¡œ ë³´ì´ë„ë¡ ì„¤ì •
                images[currentImageIndex].classList.add('show');

                function showNextImage() {
                    const currentImage = images[currentImageIndex];
                    currentImage.classList.remove('show');

                    currentImageIndex = (currentImageIndex + 1) % images.length;
                    const nextImage = images[currentImageIndex];
                    nextImage.classList.add('show');
                }

                setInterval(showNextImage, 13000); // 10ì´ˆ í‘œì‹œ + 3ì´ˆ í˜ì´ë“œ ì‹œê°„
            }

            // í˜ì´ì§€ ë¡œë“œ ì‹œ ë¡œê·¸ì¸ ìƒíƒœ ê²€ì‚¬ í›„ ì ì ˆí•œ ë™ì‘ ìˆ˜í–‰
            if (checkLogin()) {
                alert("ë¡œê·¸ì¸ì´ ë˜ì–´ìˆìŠµë‹ˆë‹¤");
                window.location.href = '../'; // ë©”ì¸ í™”ë©´ìœ¼ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸
            } else {
                // ë¡œê·¸ì¸ë˜ì§€ ì•Šì€ ìƒíƒœ, ì´ë¯¸ì§€ ìŠ¬ë¼ì´ë“œì‡¼ ì‹œì‘
                contentDiv.innerHTML = `
                    <div class="main-container">
                        <div class="main-box">
                            <div class="img-box">
                                <div class="slide">
                                    <div class="image" style="background-image: url('../assets/img/SignIn-up/1.jpg');"></div>
                                    <div class="image" style="background-image: url('../assets/img/SignIn-up/2.jpg');"></div>
                                    <div class="image" style="background-image: url('../assets/img/SignIn-up/3.jpg');"></div>
                                    <div class="image" style="background-image: url('../assets/img/SignIn-up/4.jpg');"></div>
                                    <div class="image" style="background-image: url('../assets/img/SignIn-up/5.jpg');"></div>
                                </div>
                            </div>
                            <div class="gap-box"></div>
                            <div class="input-box">
                                <h1 class="login-title">Sign In</h1>
                                <form action="../php/SignIn.php" method="POST" class="login-form">
                                    <div class="mb-4">
                                        <label for="UsernameInput" class="form-label">Username</label>
                                        <input type="id" class="form-control" id="UsernameInput" placeholder="Username" name="userid" required>
                                    </div>
                                    <div class="mb-4">
                                        <label for="passwordInput" class="form-label">Password</label>
                                        <div class="input-group">
                                            <input type="password" class="form-control" id="passwordInput" placeholder="Password" name="password" required>
                                            <span class="input-group-text" onclick="togglePasswordVisibility()">
                                                <i class="fa-solid fa-eye" id="togglePasswordIcon"></i>
                                            </span>
                                        </div>
                                    </div>
                                    <div class="form-check mb-3">
                                        <input type="checkbox" class="form-check-input" id="keepLoggedIn">
                                        <label for="keepLoggedIn" class="form-check-label">Keep me logged in</label>
                                    </div>
                                    <button type="submit" class="btn btn-primary w-100">Sign In</button>
                                    <div class="alternative-login text-center mt-3">
                                        <span class="separator"></span>
                                        <p class="alternative-login-label d-inline">OR</p>
                                        <span class="separator"></span>
                                    </div>
                                    <button type="button" class="btn btn-light w-100 mt-3">
                                        <span>Sign in With Google</span>
                                        <img src="https://cdn.builder.io/api/v1/image/assets/TEMP/c03c77ce19e8bf70ed1f8ebcbebed9bb48625ae66d77f6d94001739a96215de2?apiKey=bc78f76eef194586ad9f757d0766f5b4&" alt="Google logo" class="icon ms-2" />
                                    </button>
                                </form>
                                <footer class="footer mt-5">
                                    <p>Need an account? <a href="./SignUp.html" class="footer-link">Create One</a></p>
                                </footer>
                            </div>
                        </div>
                    </div>
                `;
                startSlideshow(); // ìŠ¬ë¼ì´ë“œì‡¼ ì‹œì‘ í•¨ìˆ˜ í˜¸ì¶œ
            }
        });

        function togglePasswordVisibility() {
            const passwordInput = document.getElementById('passwordInput');
            const passwordIcon = document.getElementById('togglePasswordIcon');
            if (passwordInput.type === 'password') {
                passwordInput.type = 'text';
                passwordIcon.classList.remove('fa-eye');
                passwordIcon.classList.add('fa-eye-slash');
            } else {
                passwordInput.type = 'password';
                passwordIcon.classList.remove('fa-eye-slash');
                passwordIcon.classList.add('fa-eye');
            }
        }
    </script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/5.1.3/js/bootstrap.bundle.min.js"></script>
</body>
</html>
