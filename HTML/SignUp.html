<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>í‚¹ì½©ë¨¸ë‹ˆ ğŸ’¸ - íšŒì›ê°€ì…</title>
    <link rel="icon" type="image/x-icon" href="../assets/img/main/DK_icon.ico">
    <link rel="stylesheet" href="../css/main.css">
    <link rel="stylesheet" href="../css/SignIn-Up.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <script src="../JS/auth.js" defer></script>
    <script src="../JS/base.js" defer></script>
</head>
<body>
    <video autoplay loop muted playsinline id="bg-video" style="filter: blur(3px);">
        <source src="../assets/video/Red_Smok.mp4" type="video/mp4">
    </video>

    <div id="content">
        <!-- JavaScriptê°€ ë¡œê·¸ì¸ ìƒíƒœì— ë”°ë¼ ì»¨í…ì¸ ë¥¼ ë¡œë“œí•©ë‹ˆë‹¤ -->
    </div>

    <script>
        async function loadSignUpContent() {
            const contentDiv = document.getElementById('content');
            const userData = await validateCookie();

            if (userData) {
                alert("ë¡œê·¸ì¸ì´ ë˜ì–´ìˆìŠµë‹ˆë‹¤");
                window.location.href = '../'; // ë©”ì¸ í™”ë©´ìœ¼ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸
            } else {
                // ë¡œê·¸ì¸ë˜ì§€ ì•Šì€ ìƒíƒœ, ì´ë¯¸ì§€ ìŠ¬ë¼ì´ë“œì‡¼ ì‹œì‘
                contentDiv.innerHTML = `
                    <div class="main-container">
                        <div class="main-box">
                            <div class="img-box">
                                <div class="slide">
                                    <div class="image" style="background-image: url('../assets/img/SignIn-up/1.jpg');"></div>
                                    <div class="image" style="background-image: url('../assets/img/SignIn-up/2.jpg');"></div>
                                    <div class="image" style="background-image: url('../assets/img/SignIn-up/3.jpg');"></div>
                                    <div class="image" style="background-image: url('../assets/img/SignIn-up/4.jpg');"></div>
                                    <div class="image" style="background-image: url('../assets/img/SignIn-up/5.jpg');"></div>
                                </div>
                            </div>
                            <div class="gap-box"></div>
                            <div class="input-box">
                                <img src="../assets/img/main/BlackJack.png" alt="Blackjack" class="blackjack-img clickable-img" id="blackjack-logo">
                                <form id="signupForm" class="login-form">
                                    <div class="mb-4">
                                        <label for="UsernameInput" class="form-label">ì•„ì´ë””</label>
                                        <input type="text" class="form-control" id="UsernameInput" placeholder="ì•„ì´ë””ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”" name="userid" required>
                                    </div>
                                    <div class="mb-4">
                                        <label for="EmailInput" class="form-label">ì´ë©”ì¼</label>
                                        <input type="email" class="form-control" id="EmailInput" placeholder="ì´ë©”ì¼ì„ ì…ë ¥í•´ì£¼ì„¸ìš”" name="email" required>
                                    </div>
                                    <div class="mb-4">
                                        <label for="PasswordInput" class="form-label">ë¹„ë°€ë²ˆí˜¸</label>
                                        <div class="input-group">
                                            <input type="password" class="form-control" id="PasswordInput" placeholder="ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”" name="password" required>
                                            <span class="input-group-text" onclick="togglePasswordVisibility()">
                                                <i class="fa-solid fa-eye" id="togglePasswordIcon"></i>
                                            </span>
                                        </div>
                                    </div>
                                    <div class="form-check mb-3">
                                        <input type="checkbox" class="form-check-input" id="termsAgreement" required>
                                        <label for="termsAgreement" class="form-check-label">ì„œë¹„ìŠ¤ ì´ìš©ì•½ê´€ì— ë™ì˜í•©ë‹ˆë‹¤.</label>
                                    </div>
                                    <button type="submit" class="btn btn-primary w-100">íšŒì›ê°€ì…</button>
                                    <div class="alternative-login text-center mt-3">
                                        <span class="separator"></span>
                                        <p class="alternative-login-label d-inline">ë˜ëŠ”</p>
                                        <span class="separator"></span>
                                    </div>
                                    <button type="button" class="btn btn-light w-100 mt-3" id="google-login">
                                        <span>Googleë¡œ ë¡œê·¸ì¸</span>
                                        <img src="../assets/img/SignIn-up/Google-logo.svg" alt="Google ë¡œê³ " class="icon ms-2" />
                                    </button>
                                </form>
                                <footer class="footer mt-5">
                                    <p>ì´ë¯¸ ê³„ì •ì´ ìˆìœ¼ì‹ ê°€ìš”? <a href="./SignIn.html" class="footer-link">ë¡œê·¸ì¸</a></p>
                                </footer>
                            </div>
                        </div>
                    </div>
                `;
                startSlideshow(); // ìŠ¬ë¼ì´ë“œì‡¼ ì‹œì‘ í•¨ìˆ˜ í˜¸ì¶œ
                document.getElementById('google-login').addEventListener('click', function() {
                    alert("ì´ ê¸°ëŠ¥ì€ ê°œë°œì¤‘ì…ë‹ˆë‹¤");
                });
                document.getElementById('blackjack-logo').addEventListener('click', function() {
                    window.location.href = '../';
                });

                document.getElementById('signupForm').addEventListener('submit', async function(event) {
                    event.preventDefault();
                    const id = document.getElementById('UsernameInput').value;
                    const email = document.getElementById('EmailInput').value;
                    const pw = document.getElementById('PasswordInput').value;
                    const result = await register(id, email, pw);

                    if (result.success) {
                        alert("íšŒì›ê°€ì… ì„±ê³µ");
                        window.location.href = './SignIn.html';
                    } else {
                        alert(result.message);
                    }
                });
            }
        }

        function startSlideshow() {
            let currentImageIndex = 0;
            const images = document.querySelectorAll('.image');

            // ì²« ë²ˆì§¸ ì´ë¯¸ì§€ë¥¼ ë°”ë¡œ ë³´ì´ë„ë¡ ì„¤ì •
            images[currentImageIndex].classList.add('show');

            function showNextImage() {
                const currentImage = images[currentImageIndex];
                currentImage.classList.remove('show');

                currentImageIndex = (currentImageIndex + 1) % images.length;
                const nextImage = images[currentImageIndex];
                nextImage.classList.add('show');
            }

            setInterval(showNextImage, 13000); // 10ì´ˆ í‘œì‹œ + 3ì´ˆ í˜ì´ë“œ ì‹œê°„
        }

        function togglePasswordVisibility() {
            const passwordInput = document.getElementById('PasswordInput');
            const passwordIcon = document.getElementById('togglePasswordIcon');
            if (passwordInput.type === 'password') {
                passwordInput.type = 'text';
                passwordIcon.classList.remove('fa-eye');
                passwordIcon.classList.add('fa-eye-slash');
            } else {
                passwordInput.type = 'password';
                passwordIcon.classList.remove('fa-eye-slash');
                passwordIcon.classList.add('fa-eye');
            }
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ë¡œê·¸ì¸ ìƒíƒœ ê²€ì‚¬ í›„ ì ì ˆí•œ ë™ì‘ ìˆ˜í–‰
        window.onload = loadSignUpContent;
    </script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/5.1.3/js/bootstrap.bundle.min.js"></script>
</body>
</html>
